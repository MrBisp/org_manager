<% # This is the navbar that is used to navigate the app. It is used in all the views. Inserted in app/views/layouts/application.html.erb %>
<nav>
  <div class="navbar">
    <div class="brand">
      <%= link_to "Org Manager", root_path, class: "brand-link" %>
    </div>
    
    <div class="user-menu">
      <% # authenticated? comes from app/controllers/concerns/authentication.rb %>
      <% if authenticated? %>
        <span class="user-email">
          <% if Current.user.organization %>
            <%= Current.user.email_address %> | <%= Current.user.organization.name %>
          <% else %>
            <%= Current.user.email_address %>
          <% end %>
        </span>
        <% # Here we delete the session which is the same as logging out %>
        <%= link_to "Log out", session_path, class: "nav-link", data: { turbo_method: :delete } %>
      <% else %>
        <% # new_registration_path and new_session_path come from the routes and are automatically generated by Rails through naming conventions %>
        <%= link_to "Sign up", new_registration_path, class: "nav-link" %>
        <%= link_to "Log in", new_session_path, class: "nav-link" %>
      <% end %>
    </div>
  </div>
</nav> 